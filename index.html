
<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>AEMP Pack-Demo</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <div class="left">
      <button id="toggleSidebar" class="icon-btn mobile-only" aria-label="Sets öffnen">☰</button>
      <h1 id="appTitle">AEMP Pack-Demo</h1>
    </div>
    <div class="actions">
      <button id="homeBtn" class="icon-btn hidden" title="Hauptmenü" aria-label="Hauptmenü">
        <!-- simple home icon -->
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M3 10.5L12 3l9 7.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1v-10.5z" stroke="currentColor" stroke-width="1.5" fill="none"/>
        </svg>
      </button>
      <input id="search" type="search" class="hidden" placeholder="Sets suchen…" />
      <div id="userBox" class="userbox hidden">
        <span id="userName"></span>
        <button id="logoutBtn" title="Abmelden">Abmelden</button>
      </div>
      <button id="resetData" title="Lokale Testdaten zurücksetzen">Testdaten zurücksetzen</button>
    </div>
  </header>

  <main>
    <div id="drawerBackdrop" class="drawer-backdrop"></div>
    <aside id="setList" class="drawer hidden"></aside>

    <section id="menu" class="view">
      <div class="menu-card">
        <h2>Hauptmenü</h2>
        <div class="kv">
          <dt>Packplatz</dt>
          <dd><span id="stationLabel">– nicht gewählt –</span> <button id="chooseStation" class="secondary">ändern</button></dd>
        </div>
        <div class="menu-actions">
          <button id="goWorkspace" class="primary" disabled>Zum Arbeitsplatz</button>
          <button id="viewArchive">Archiv / Freigaben</button>
        </div>
      </div>

      <div id="stationPicker" class="menu-card">
        <h3>Packplatz wählen</h3>
        <div class="station-grid">
          <button class="station-btn" data-station="Packplatz A">Packplatz A</button>
          <button class="station-btn" data-station="Packplatz B">Packplatz B</button>
          <button class="station-btn" data-station="Packplatz C">Packplatz C</button>
        </div>
      </div>
    </section>

    <section id="details" class="view hidden">
      <div class="placeholder">
        <h2>Wähle links ein Set aus</h2>
        <p>Dann siehst du hier die Details und kannst den Packvorgang starten.</p>
      </div>
    </section>

    <section id="archiveView" class="view hidden">
      <div class="menu-card">
        <h2>Archiv / Freigegebene Packvorgänge</h2>
        <div id="archiveList" class="archive-list"></div>
      </div>
    </section>
  </main>

  <!-- Pack Modal -->
  <div id="modalBackdrop" class="hidden overlay">
    <div id="modal" class="sheet">
      <div class="modal-header">
        <h3 id="modalTitle">Packvorgang</h3>
        <button id="modalClose" aria-label="Schließen" class="icon-btn">×</button>
      </div>
      <div class="modal-body" id="modalBody"></div>
      <div class="modal-footer sticky-footer">
        <button id="cancelPack">Abbrechen</button>
        <button id="savePack" class="primary">Speichern & Abschließen</button>
      </div>
    </div>
  </div>

  <!-- Lightbox Modal -->
  <div id="lightboxBackdrop" class="hidden overlay" aria-hidden="true">
    <div id="lightbox" class="sheet">
      <img id="lightboxImg" alt="Vorschau" />
      <div id="lightboxCaption"></div>
      <button id="lightboxClose" aria-label="Bild schließen" class="icon-btn abs-close">×</button>
    </div>
  </div>

  <!-- Report Modal -->
  <div id="reportBackdrop" class="hidden overlay">
    <div id="reportModal" class="sheet">
      <header class="report-header">
        <h3 id="reportTitle">Packreport</h3>
        <div class="report-actions">
          <button id="reportPrint">Drucken</button>
          <button id="reportClose" class="primary">Schließen</button>
        </div>
      </header>
      <div id="reportBody" class="report-body"></div>
    </div>
  </div>

  <!-- Upload-on-missing Modal -->
  <div id="uploadBackdrop" class="hidden overlay">
    <div id="uploadModal" class="sheet">
      <header class="upload-header">
        <h3 id="uploadTitle">Bild hinzufügen</h3>
        <button id="uploadClose" aria-label="Schließen" class="icon-btn">×</button>
      </header>
      <div class="upload-body" id="uploadBody">
        <p id="uploadQuestion">Für dieses Element ist kein Bild hinterlegt. Möchtest du eines hochladen?</p>
        <div class="upload-controls">
          <input id="uploadFile" type="file" accept="image/*" capture="environment" />
        </div>
      </div>
      <footer class="upload-footer sticky-footer">
        <button id="uploadSkip">Ohne Bild fortfahren</button>
        <button id="uploadSave" class="primary" disabled>Hochladen & Weiter</button>
      </footer>
    </div>
  </div>

  <!-- Login Overlay -->
  <div id="loginOverlay" class="login-overlay hidden overlay">
    <form id="loginForm" class="login-card" autocomplete="off">
      <h3>Anmeldung</h3>
      <p class="muted">Demo-User: <code>ips-1</code> … <code>ips-5</code> • Passwort: <code>bilder</code></p>
      <label>Benutzername
        <input id="loginUser" name="user" required placeholder="z. B. ips-1" autocomplete="username" />
      </label>
      <label>Passwort
        <input id="loginPass" type="password" name="pass" required placeholder="Passwort" autocomplete="current-password" />
      </label>
      <div class="login-actions">
        <button type="submit" class="primary">Anmelden</button>
      </div>
    </form>
  </div>

  <script src="app.js"></script>
</body>
</html>
